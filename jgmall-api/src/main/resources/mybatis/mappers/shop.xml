<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shop">
	
	<insert id="insert" parameterType="reqadminregistproductvo">
		<![CDATA[
			insert into tpdt0001(prd_nm, sel_fl, display_st, reg_dt, prd_dpt, sel_prc, sale_prc, opt_fl, del_fl)
			values (#{productNm}, #{sellFl}, #{displaySt}, now(), #{productDpt}, #{sellPrc}, #{salePrc}, #{optionFl}, 'N');
		]]>
	</insert>
	
	<select id="selectProductList" resultType="productvo">
		<![CDATA[
			select 
				no as productNo,
				prd_nm as productNm,
				sel_fl as sellFl,
				display_st as displaySt,
				to_char(reg_dt, 'YYYY-MM-DD') as regDate,
				prd_dpt as productDpt,
				sel_prc as sellPrc,
				sale_prc as salePrc,
				opt_fl as optionFl
			from tpdt0001
			where del_fl = 'N'
		]]>
	</select>
	
	<select id="selectProductDetail" parameterType="long" resultType="productvo">
		<![CDATA[
			select 
				prd_nm as productNm,
				sel_fl as sellFl,
				display_st as displaySt,
				to_char(reg_dt, 'YYYY-MM-DD') as regDate,
				prd_dpt as productDpt,
				sel_prc as sellPrc,
				sale_prc as salePrc,
				opt_fl as optionFl
			from tpdt0001
			where del_fl = 'N'
			  and no = #{productNo}
		]]>
	</select>
	
	<update id="deleteProduct" parameterType="long" >
		<![CDATA[
			update tpdt0001
				set del_fl='Y'
			  where no=#{productNo}
		]]>
	</update>
	
	<update id="updateProduct" parameterType="productvo" >
		<![CDATA[
			update
				tpdt0001
			set 
				prd_nm=#{productNm},
				sel_fl=#{sellFl},
				display_st=#{displaySt},
				prd_dpt=#{productDpt},
				sel_prc=#{sellPrc},
				sale_prc=#{salePrc},
				opt_fl=#{optionFl}
			where no=#{productNo}
		]]>
	</update>
	
	<select id="selectProductStockList" resultType="productvo">
		<![CDATA[
			select 
				no as productNo,
				prd_nm as productNm,
				sel_fl as sellFl,
				display_st as displaySt,
				to_char(reg_dt, 'YYYY-MM-DD') as regDate,
				prd_dpt as productDpt,
				sel_prc as sellPrc,
				sale_prc as salePrc,
				stock_amt as stockAmt,
				stock_fl as stockFl,
				opt_fl as optionFl
			from tpdt0001
			where del_fl = 'N'
		]]>
	</select>
	
	<update id="updateProductStock" parameterType="productvo" >
		<![CDATA[
			update
				tpdt0001
			set 
				sel_fl=#{sellFl},
				display_st=#{displaySt},
				stock_amt=#{stockAmt},
				stock_fl=#{stockFl}
			where no=#{productNo}
		]]>
	</update>
	
	
</mapper>
